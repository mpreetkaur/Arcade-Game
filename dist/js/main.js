"use strict";!function(){var n={},s=[];function t(e){if(n[e])return n[e];var t=new Image;t.onload=function(){n[e]=t,i()&&s.forEach(function(e){e()})},n[e]=!1,t.src=e}function i(){var e=!0;for(var t in n)n.hasOwnProperty(t)&&!n[t]&&(e=!1);return e}window.Resources={load:function(e){e instanceof Array?e.forEach(function(e){t(e)}):t(e)},get:function(e){return n[e]},onReady:function(e){s.push(e)},isReady:i}}();var levelCounter=document.querySelector(".levels"),leftLives=document.querySelector(".lives"),bestLife=document.querySelector(".bestLevel"),levels=1,lives=3,Enemy=function(e,t,n){this.x=e,this.y=t,this.speed=n,this.sprite="images/enemy-bug.png"};Enemy.prototype.update=function(e){this.x+=this.speed*levels*e,500<this.x&&(this.x=-70),player.x>=this.x-75&&player.x<=this.x+75&&player.y>=this.y-60&&player.y<=this.y+60&&(player.x=200,player.y=400,decreasingLives(),0==leftLives.textContent&&swal({title:"SORRY!",text:"You Lost!",icon:"warning"}).then(function(e){bestLife.textContent=levels,levels=1,levelCounter.textContent=levels,lives=3,leftLives.textContent=3}))},Enemy.prototype.render=function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y)};var Player=function(){this.x=200,this.y=400,this.sprite="images/char-cat-girl.png"};Player.prototype.update=function(){this.y<60&&(swal("Good job!","You Won!","success"),increaseLevels(),lives=3,leftLives.textContent=3,this.x=200,this.y=400)},Player.prototype.render=function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y)},Player.prototype.handleInput=function(e){"left"==e&&50<this.x?this.x-=100:"up"==e&&50<this.y?this.y-=85:"right"==e&&this.x<400?this.x+=100:"down"==e&&this.y<400&&(this.y+=85)};var enemy1=new Enemy(0,225,50),enemy2=new Enemy(-50,140,70),enemy3=new Enemy(-100,60,90),enemy4=new Enemy(-800,225,50),enemy5=new Enemy(-400,140,30),allEnemies=[enemy1,enemy2,enemy3,enemy4,enemy5],player=new Player(50,50);function increaseLevels(){levels++,levelCounter.textContent=levels}function decreasingLives(){lives--,leftLives.textContent=lives}document.addEventListener("keyup",function(e){document.querySelector(".swal-overlay--show-modal")||player.handleInput({37:"left",38:"up",39:"right",40:"down"}[e.keyCode])});var Engine=function(e){var n,t=e.document,s=e.window,i=t.createElement("canvas"),o=i.getContext("2d");function r(){var t,e=Date.now();t=(e-n)/1e3,allEnemies.forEach(function(e){e.update(t)}),player.update(),function(){var e,t,n=["images/water-block.png","images/stone-block.png","images/stone-block.png","images/stone-block.png","images/grass-block.png","images/grass-block.png"];for(o.clearRect(0,0,i.width,i.height),e=0;e<6;e++)for(t=0;t<5;t++)o.drawImage(Resources.get(n[e]),101*t,83*e);allEnemies.forEach(function(e){e.render()}),player.render()}(),n=e,s.requestAnimationFrame(r)}i.width=505,i.height=606,t.body.appendChild(i),Resources.load(["images/stone-block.png","images/water-block.png","images/grass-block.png","images/enemy-bug.png","images/char-cat-girl.png"]),Resources.onReady(function(){n=Date.now(),r()}),e.ctx=o}(void 0);